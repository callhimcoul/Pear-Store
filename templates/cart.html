{% extends 'base.html' %}
{% block content %}
<h1>Your Cart</h1>

{% if items|length == 0 %}
<p>Your cart is empty.</p>
{% else %}
<form action="{{ url_for('clear_cart') }}" method="post" style="margin-bottom:1rem;">
    <button type="submit">Clear cart</button>
</form>

<ul>
    {% for it in items %}
    <li class="item-card">
        <img class="card-img" src="{{ url_for('static', filename=it.image) }}" alt="{{ it.name }}" width="120">
        <div class="card-desc">
            <a href="{{ url_for('product', prod_id=it.id) }}"><b>{{ it.name }}</b></a>
            <p>{{ it.description }}</p>
            <form action="{{ url_for('update_cart_item', prod_id=it.id) }}" method="post" style="display:flex;gap:.5rem;align-items:center;">
                <label>Qty</label>
                <input type="number" name="qty" min="0" max="99" value="{{ it.qty }}" style="width:4rem;">
                <button type="submit">Update</button>
            </form>
            <form action="{{ url_for('remove_from_cart', prod_id=it.id) }}" method="post" style="margin-top:.5rem;">
                <button type="submit">Remove</button>
            </form>
        </div>
    </li>
    {% endfor %}
</ul>

<p><b>Total items:</b> {{ total_qty }}</p>
{% endif %}
{% endblock %}
